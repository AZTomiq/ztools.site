let inputText="";function formatText(){const e=document.getElementById("input-text"),t=document.getElementById("formatted-output");if(!e||!t)return;let n=e.value;if(!n.trim())return void(t.value="");const a=document.getElementById("remove_extra_spaces")?.checked??!0,o=document.getElementById("remove_line_breaks")?.checked??!1,r=document.getElementById("trim_lines")?.checked??!0,s=document.getElementById("normalize_quotes")?.checked??!0,c=document.getElementById("case_transform")?.value??"none";switch(n=n.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),a&&(n=n.replace(/[ \t]+/g," ")),r&&(n=n.split("\n").map(e=>e.trim()).join("\n")),n=o?n.replace(/\n+/g," "):n.replace(/\n{3,}/g,"\n\n"),s&&(n=n.replace(/[\u201C\u201D]/g,'"'),n=n.replace(/[\u2018\u2019]/g,"'"),n=n.replace(/[\u2013\u2014]/g,"-"),n=n.replace(/\u2026/g,"...")),c){case"lowercase":n=n.toLowerCase();break;case"uppercase":n=n.toUpperCase();break;case"capitalize":n=n.charAt(0).toUpperCase()+n.slice(1).toLowerCase();break;case"title":n=n.toLowerCase().replace(/(?:^|\s)\S/g,e=>e.toUpperCase())}n=n.trim(),t.value=n,updateStats(e.value,n)}function updateStats(e,t){const n=document.getElementById("format-stats");if(!n){const n=document.getElementById("formatted-output");if(n&&n.parentElement){const a=document.createElement("div");a.id="format-stats",a.style.cssText="margin-top: 0.5rem; font-size: 0.875rem; color: var(--text-secondary); display: flex; gap: 1rem;",n.parentElement.appendChild(a),updateStats(e,t)}return}const a=e.length,o=t.length,r=a-o,s=a>0?(r/a*100).toFixed(1):0;n.innerHTML=`\n    <span>Original: <strong>${a}</strong> chars</span>\n    <span>Formatted: <strong>${o}</strong> chars</span>\n    ${r>0?`<span style="color: var(--success);">Reduced by <strong>${r}</strong> chars (${s}%)</span>`:""}\n  `}function copyFormatted(){const e=document.getElementById("formatted-output");e&&e.value&&(e.select(),document.execCommand("copy"),showToast("âœ“ Copied to clipboard!"))}function clearText(){const e=document.getElementById("input-text"),t=document.getElementById("formatted-output");e&&(e.value=""),t&&(t.value="");const n=document.getElementById("format-stats");n&&(n.innerHTML=""),inputText=""}function showToast(e){const t=document.createElement("div");t.textContent=e,t.style.cssText="\n    position: fixed;\n    bottom: 2rem;\n    right: 2rem;\n    background: var(--success);\n    color: white;\n    padding: 0.75rem 1.5rem;\n    border-radius: 0.5rem;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n    z-index: 10000;\n    animation: slideIn 0.3s ease;\n  ",document.body.appendChild(t),setTimeout(()=>{t.style.animation="slideOut 0.3s ease",setTimeout(()=>t.remove(),300)},2e3)}if(document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("input-text");e&&(e.addEventListener("input",e=>{inputText=e.target.value}),e.addEventListener("paste",e=>{setTimeout(()=>{formatText()},100)}),e.value&&(inputText=e.value,formatText()))}),!document.getElementById("toast-animations")){const e=document.createElement("style");e.id="toast-animations",e.textContent="\n    @keyframes slideIn {\n      from {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n      to {\n        transform: translateX(0);\n        opacity: 1;\n      }\n    }\n    @keyframes slideOut {\n      from {\n        transform: translateX(0);\n        opacity: 1;\n      }\n      to {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n    }\n  ",document.head.appendChild(e)}