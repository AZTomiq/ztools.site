const CHARS={upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",lower:"abcdefghijklmnopqrstuvwxyz",numbers:"0123456789",symbols:"!@#$%^&*()_+~`|}{[]:;?><,./-="},AMBIGUOUS=["l","I","1","O","0","o"];function updateLength(e){document.getElementById("length-val").textContent=e,generatePassword()}function generatePassword(){const e=parseInt(document.getElementById("length").value),t=parseInt(document.getElementById("quantity").value)||1,n=document.getElementById("uppercase").checked,d=document.getElementById("lowercase").checked,s=document.getElementById("numbers").checked,a=document.getElementById("symbols").checked,o=document.getElementById("exclude-ambiguous").checked,l=document.getElementById("easy-say").checked,c=!l&&s,r=!l&&a;let m="",u=[];const g=e=>{let t=e;o&&(t=t.split("").filter(e=>!AMBIGUOUS.includes(e)).join("")),m+=t,t.length>0&&u.push(t[Math.floor(Math.random()*t.length)])};n&&g(CHARS.upper),d&&g(CHARS.lower),c&&g(CHARS.numbers),r&&g(CHARS.symbols);const i=document.getElementById("password-output"),h=document.getElementById("strength-bar"),y=document.getElementById("strength-text");if(0===m.length)return i.value="",h.style.width="0%",void(y.textContent="Strength: ...");const p=[];for(let n=0;n<t;n++){let t=u.join("");for(let n=t.length;n<e;n++)t+=m[Math.floor(Math.random()*m.length)];t=t.split("").sort(()=>.5-Math.random()).join(""),p.push(t)}i.value=p.join("\n"),i.rows=Math.min(Math.max(t,1),10),p.length>0&&calculateStrength(p[0])}function calculateStrength(e){let t=0;e.length>8&&(t+=1),e.length>12&&(t+=1),e.length>=16&&(t+=1),/[A-Z]/.test(e)&&(t+=1),/[a-z]/.test(e)&&(t+=1),/[0-9]/.test(e)&&(t+=1),/[^A-Za-z0-9]/.test(e)&&(t+=1);let n=Math.min(t/7*100,100);const d=document.getElementById("strength-bar"),s=document.getElementById("strength-text");d.className="strength-bar";let a="Weak";n<30?(d.classList.add("weak"),a="Weak"):n<60?(d.classList.add("medium"),a="Medium"):n<80?(d.classList.add("strong"),a="Strong"):(d.classList.add("very-strong"),a="Very Strong"),d.style.width=n+"%",s.textContent=`Strength: ${a}`}function copyPassword(){const e=document.getElementById("password-output");e.select(),e.setSelectionRange(0,99999),navigator.clipboard&&navigator.clipboard.writeText(e.value).then(()=>{document.querySelector(".display-actions .btn-icon");e.classList.add("copied"),alert("Copied to clipboard!")})}document.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.addEventListener("change",generatePassword)}),document.getElementById("quantity").addEventListener("change",generatePassword),document.getElementById("quantity").addEventListener("input",generatePassword),document.getElementById("easy-say").addEventListener("change",e=>{const t=document.getElementById("numbers"),n=document.getElementById("symbols");e.target.checked?(t.checked=!1,n.checked=!1,t.disabled=!0,n.disabled=!0):(t.disabled=!1,n.disabled=!1),generatePassword()}),generatePassword();