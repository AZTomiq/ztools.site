const CHARS={upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",lower:"abcdefghijklmnopqrstuvwxyz",numbers:"0123456789",symbols:"!@#$%^&*()_+~`|}{[]:;?><,./-="},AMBIGUOUS=["l","I","1","O","0","o"];function updateLength(e){document.getElementById("length-val").textContent=e,generatePassword()}function generatePassword(){const e=parseInt(document.getElementById("length").value),t=document.getElementById("uppercase").checked,n=document.getElementById("lowercase").checked,s=document.getElementById("numbers").checked,d=document.getElementById("symbols").checked,a=document.getElementById("exclude-ambiguous").checked,o=document.getElementById("easy-say").checked,l=!o&&s,c=!o&&d;let r="",m=[];const u=e=>{let t=e;a&&(t=t.split("").filter(e=>!AMBIGUOUS.includes(e)).join("")),r+=t,t.length>0&&m.push(t[Math.floor(Math.random()*t.length)])};t&&u(CHARS.upper),n&&u(CHARS.lower),l&&u(CHARS.numbers),c&&u(CHARS.symbols);const g=document.getElementById("password-output");if(0===r.length)return g.value="",void updateStrength(0);let i=m.join("");for(let t=i.length;t<e;t++)i+=r[Math.floor(Math.random()*r.length)];i=i.split("").sort(()=>.5-Math.random()).join(""),g.value=i,calculateStrength(i)}function calculateStrength(e){let t=0;e.length>8&&(t+=1),e.length>12&&(t+=1),e.length>=16&&(t+=1),/[A-Z]/.test(e)&&(t+=1),/[a-z]/.test(e)&&(t+=1),/[0-9]/.test(e)&&(t+=1),/[^A-Za-z0-9]/.test(e)&&(t+=1);let n=Math.min(t/7*100,100);const s=document.getElementById("strength-bar"),d=document.getElementById("strength-text");s.className="strength-bar";let a="Weak";n<30?(s.classList.add("weak"),a="Weak"):n<60?(s.classList.add("medium"),a="Medium"):n<80?(s.classList.add("strong"),a="Strong"):(s.classList.add("very-strong"),a="Very Strong"),s.style.width=n+"%",d.textContent=`Strength: ${a}`}function copyPassword(){const e=document.getElementById("password-output");e.select(),e.setSelectionRange(0,99999),navigator.clipboard&&navigator.clipboard.writeText(e.value).then(()=>{e.type;e.type="text",e.classList.add("copied"),setTimeout(()=>e.classList.remove("copied"),200)})}document.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.addEventListener("change",generatePassword)}),document.getElementById("easy-say").addEventListener("change",e=>{const t=document.getElementById("numbers"),n=document.getElementById("symbols");e.target.checked?(t.disabled=!0,n.disabled=!0):(t.disabled=!1,n.disabled=!1),generatePassword()}),generatePassword();