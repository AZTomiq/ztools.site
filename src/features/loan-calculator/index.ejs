<!-- title: <%= t('loan.title') %> - ZTools -->

<link rel="stylesheet" href="<%= toolConfig._assets.css %>">

<section class="tool-container">
  <div class="page-header">
    <h1>üí∏ <%= t('loan.title') %>
    
      <% if (typeof toolConfig !== 'undefined' && toolConfig.meta && toolConfig.meta.version) { %>
        <button class="version-badge" id="open-changelog" aria-label="View Changelog">v<%= toolConfig.meta.version %></button>
      <% } %></h1>
    <p>
      <%= t('loan.desc') %>
    </p>
  </div>

  <div class="calculator-card">
    <form id="loan-form" onsubmit="return false;">
      <div class="form-group">
        <label for="loan-amount">
          <%= t('loan.form.amount') %>
        </label>
        <div class="input-group">
          <input type="text" id="loan-amount" placeholder="<%= t('loan.form.amount_ph') %>" inputmode="numeric"
            autocomplete="off">
          <span class="input-suffix">VNƒê</span>
        </div>
      </div>

      <div class="form-group" style="display: flex; gap: 1rem;">
        <div style="flex: 1;">
          <label for="loan-term">
            <%= t('loan.form.term') %>
          </label>
          <div class="input-group">
            <input type="number" id="loan-term" placeholder="<%= t('loan.form.term_ph') %>" min="1">
            <span class="input-suffix">
              <%= t('loan.form.term_unit') %>
            </span>
          </div>
        </div>
        <div style="flex: 1;">
          <label for="interest-rate">
            <%= t('loan.form.rate') %>
          </label>
          <div class="input-group">
            <input type="number" id="interest-rate" placeholder="<%= t('loan.form.rate_ph') %>" step="0.01">
            <span class="input-suffix">%</span>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="start-date">
          <%= t('loan.form.start_date') %>
        </label>
        <input type="date" id="start-date">
      </div>

      <div class="form-group">
        <label>
          <%= t('loan.form.method.label') %>
        </label>
        <div class="radio-group">
          <label class="radio-label">
            <input type="radio" name="calculation-method" value="reducing" checked>
            <span>
              <%= t('loan.form.method.reducing') %>
            </span>
          </label>
          <label class="radio-label">
            <input type="radio" name="calculation-method" value="flat">
            <span>
              <%= t('loan.form.method.flat') %>
            </span>
          </label>
        </div>
        <p style="font-size: 0.85rem; color: var(--text-muted); margin-top: 0.5rem; font-style: italic;">
          <%= t('loan.form.note') %>
        </p>
      </div>

      <div class="button-group">
        <button type="button" id="btn-calculate" class="btn-calculate">
          <%= t('loan.form.btn_calc') %>
        </button>
        <button type="button" id="btn-reset" class="btn-reset">
          <%= t('loan.form.btn_reset') %>
        </button>
      </div>
    </form>

    <div id="result-section" class="result-section">
      <h3 style="margin-bottom: 1.5rem; border-left: 4px solid var(--primary-color); padding-left: 0.5rem;">
        <%= t('loan.result.title') %>
      </h3>

      <div class="result-summary">
        <div class="result-item">
          <span class="label">
            <%= t('loan.result.monthly') %>
          </span>
          <span class="value" id="result-monthly">0</span>
          <small style="color: var(--text-muted); font-size: 0.8rem;">
            <%= t('loan.result.monthly_note') %>
          </small>
        </div>
        <div class="result-item">
          <span class="label">
            <%= t('loan.result.total_interest') %>
          </span>
          <span class="value" id="result-total-interest">0</span>
        </div>
        <div class="result-item">
          <span class="label">
            <%= t('loan.result.total_payment') %>
          </span>
          <span class="value total-payment" id="result-total-payment">0</span>
        </div>
      </div>

      <h4 style="margin-bottom: 1rem;">
        <%= t('loan.schedule.title') %>
      </h4>
      <div class="schedule-container">
        <table class="schedule-table">
          <thead>
            <tr>
              <th class="month-col">
                <%= t('loan.schedule.headers.period') %>
              </th>
              <th>
                <%= t('loan.schedule.headers.date') %>
              </th>
              <th>
                <%= t('loan.schedule.headers.balance_start') %>
              </th>
              <th>
                <%= t('loan.schedule.headers.principal') %>
              </th>
              <th>
                <%= t('loan.schedule.headers.interest') %>
              </th>
              <th>
                <%= t('loan.schedule.headers.total') %>
              </th>
              <th>
                <%= t('loan.schedule.headers.balance_end') %>
              </th>
            </tr>
          </thead>
          <tbody id="schedule-body">
            <!-- Content via JS -->
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- SEO Content Section -->
  <section class="card" style="padding: 2rem; margin-top: 3rem;">
    <h2 style="font-size: 1.5rem; margin-bottom: 1rem;">
      <%= t('loan.guide.title') %>
    </h2>

    <h3 style="font-size: 1.2rem; margin-top: 1.5rem; margin-bottom: 0.5rem;">
      <%= t('loan.guide.s1.title') %>
    </h3>
    <p style="margin-bottom: 1rem; color: var(--text-muted);">
      <%= t('loan.guide.s1.content') %>
    </p>

    <h3 style="font-size: 1.2rem; margin-top: 1.5rem; margin-bottom: 0.5rem;">
      <%= t('loan.guide.s2.title') %>
    </h3>
    <p style="margin-bottom: 1rem; color: var(--text-muted);">
      <%= t('loan.guide.s2.content') %>
    </p>
  </section>
</section>

<script src="<%= toolConfig._assets.js %>"></script>