<!-- title: <%= t('bookmarkCreator.title') %> - iZTools -->
<link rel="stylesheet" href="<%= toolConfig._assets.css %>">

<section class="tool-container">
  <div class="page-header">
    <h1>üîñ <%= t('bookmarkCreator.title') %>
        <% if (toolConfig.meta && toolConfig.meta.version) { %>
          <button class="version-badge" id="open-changelog" aria-label="View Changelog">v<%= toolConfig.meta.version %>
          </button>
          <% } %>
    </h1>
    <p>
      <%= t('bookmarkCreator.desc') %>
    </p>
  </div>

  <div class="bookmark-actions">
    <div class="search-box">
      <input type="text" id="tool-search" placeholder="<%= t('bookmarkCreator.form.search') %>">
    </div>

    <div class="actions-right">
      <div class="bulk-controls">
        <button class="btn btn-secondary btn-sm" id="toggle-view-btn">
          <i data-lucide="chevrons-down-up"
            style="width:14px; height:14px; vertical-align:middle; margin-right:4px;"></i>
          <span id="view-text">
            <%= t('bookmarkCreator.form.collapse_all') %>
          </span>
        </button>
        <div class="divider-v"></div>
        <button class="btn btn-outline btn-sm" id="toggle-select-btn">
          <i data-lucide="check-square" style="width:14px; height:14px; vertical-align:middle; margin-right:4px;"></i>
          <span id="select-text">
            <%= t('bookmarkCreator.form.deselect_all') %>
          </span>
        </button>
      </div>

      <button id="export-btn" class="btn btn-primary btn-sm btn-icon">
        üöÄ <span>
          <%= t('bookmarkCreator.form.btn_export') %>
        </span>
      </button>
    </div>
  </div>

  <div class="bookmark-grid" id="bookmark-list">
    <% const catOrder=siteGlobal.category_order || ['job', 'finance' , 'text' , 'generator' , 'daily' , 'dev' ]; const
      catMap=siteGlobal.categories; catOrder.forEach(catId=> {
      const catTools = tools.filter(t => t.category === catId && (t.status === 'active' || t.status === 'not-ready' ||
      t.status === 'legacy'));
      if (catTools.length === 0) return;
      %>
      <div class="category-group expanded" data-category="<%= catId %>">
        <h3 class="category-title toggle-cat">
          <div class="cat-title-left">
            <span class="cat-icon-small"><i data-lucide="<%= catMap[catId].icon %>"></i></span>
            <%= t(catMap[catId].translation_key) %>
          </div>
          <i data-lucide="chevron-down" class="cat-caret"></i>
        </h3>
        <div class="tools-selection">
          <% catTools.forEach(tool=> { %>
            <label class="tool-checkbox-item" data-title="<%= t(tool.translationKey + '.title') %>">
              <input type="checkbox" name="tool-choice" value="<%= tool.id %>"
                data-url="<%= rootPath %><%= locale %><%= tool.link %>"
                data-name="<%= t(tool.translationKey + '.title') %>"
                data-cat-name="<%= t(catMap[catId].translation_key) %>" checked>
              <span class="checkbox-custom"></span>
              <span class="tool-icon">
                <i data-lucide="<%= tool.icon %>"></i>
              </span>
              <span class="tool-name">
                <%= t(tool.translationKey + '.title' ) %>
              </span>
              <% if (tool.status==='not-ready' ) { %>
                <span class="tool-badge beta">BETA</span>
                <% } else if (tool.highlight) { %>
                  <span class="tool-badge hot" style="background: transparent; padding: 0;">
                    <i data-lucide="sparkles" style="width: 14px; height: 14px; color: #f59e0b; fill: #f59e0b;"></i>
                  </span>
                  <% } %>
            </label>
            <% }); %>
        </div>
      </div>
      <% }); %>
  </div>

  <!-- Visual Step-by-Step Guide -->
  <div class="export-guide-container">
    <h2 class="guide-main-title">üõ†Ô∏è <%= t('bookmarkCreator.steps_guide.title') %>
    </h2>
    <div class="steps-grid">
      <div class="step-card">
        <div class="step-num">1</div>
        <div class="step-icon">‚¨áÔ∏è</div>
        <p>
          <%= t('bookmarkCreator.steps_guide.step1') %>
        </p>
      </div>
      <div class="step-card">
        <div class="step-num">2</div>
        <div class="step-icon">üìÇ</div>
        <p>
          <%= t('bookmarkCreator.steps_guide.step2') %>
        </p>
      </div>
      <div class="step-card">
        <div class="step-num">3</div>
        <div class="step-icon">üì•</div>
        <p>
          <%= t('bookmarkCreator.steps_guide.step3') %>
        </p>
      </div>
    </div>
  </div>

  <% if (toolConfig.guide) { %>
    <section class="info-section">
      <h2>
        <%= t(toolConfig.guide.title) %>
      </h2>
      <div class="guide-grid">
        <% toolConfig.guide.items.forEach(item=> { %>
          <div class="guide-item">
            <h4>
              <%= t(item.title) %>
            </h4>
            <p>
              <%= t(item.content) %>
            </p>
          </div>
          <% }); %>
      </div>
    </section>
    <% } %>
</section>

<script>
  window.i18nData = {
    collapse: "<%= t('bookmarkCreator.form.collapse_all') %>",
    expand: "<%= t('bookmarkCreator.form.expand_all') || 'Expand All' %>",
    selectAll: "<%= t('bookmarkCreator.form.select_all') %>",
    deselectAll: "<%= t('bookmarkCreator.form.deselect_all') %>"
  };
</script>
<script src="<%= toolConfig._assets.js %>"></script>