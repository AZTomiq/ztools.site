<!-- title: <%= t('social_insurance.title') %> - ZTools -->

<link rel="stylesheet" href="<%= toolConfig._assets.css %>">

<section class="tool-container">
  <div class="page-header">
    <h1>🏥 <%= t('social_insurance.title') %>
    
      <% if (typeof toolConfig !== 'undefined' && toolConfig.meta && toolConfig.meta.version) { %>
        <button class="version-badge" id="open-changelog" aria-label="View Changelog">v<%= toolConfig.meta.version %></button>
      <% } %></h1>
    <p>
      <%= t('social_insurance.desc') %>
    </p>
  </div>

  <!-- Tab Navigation -->
  <div class="calculator-card">
    <nav class="tab-nav">
      <button class="tab-btn active" data-tab="contribution" onclick="switchTab('contribution')">
        💰 Tính đóng BHXH
      </button>
      <button class="tab-btn" data-tab="pension" onclick="switchTab('pension')">
        👴 Lương hưu
      </button>
      <button class="tab-btn" data-tab="onetime" onclick="switchTab('onetime')">
        💵 BHXH 1 lần
      </button>
    </nav>

    <!-- Tab 1: BHXH Contribution Calculator -->
    <div id="tab-contribution" class="tab-panel active">
      <h3>Tính mức đóng BHXH, BHYT, BHTN hàng tháng</h3>

      <form id="contribution-form" class="insurance-form">
        <div class="form-group">
          <label for="salary">Lương đóng BHXH (VNĐ/tháng)</label>
          <div class="input-group">
            <input type="text" id="salary" placeholder="Ví dụ: 15.000.000" inputmode="numeric">
            <span class="input-suffix">VNĐ</span>
          </div>
          <small class="hint">Lương làm căn cứ đóng bảo hiểm (thường là lương cơ bản + phụ cấp)</small>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="region">Vùng lương tối thiểu</label>
            <select id="region">
              <option value="1">Vùng I - 4.960.000đ</option>
              <option value="2">Vùng II - 4.410.000đ</option>
              <option value="3">Vùng III - 3.860.000đ</option>
              <option value="4">Vùng IV - 3.450.000đ</option>
            </select>
          </div>

          <div class="form-group">
            <label for="insurance-type">Loại hình tham gia</label>
            <select id="insurance-type">
              <option value="mandatory">Bắt buộc (Người lao động)</option>
              <option value="voluntary">Tự nguyện</option>
            </select>
          </div>
        </div>

        <div class="info-box">
          <h4>📋 Tỷ lệ đóng BHXH, BHYT, BHTN</h4>
          <table class="rate-table">
            <thead>
              <tr>
                <th>Loại BH</th>
                <th>Người lao động</th>
                <th>Doanh nghiệp</th>
                <th>Tổng</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>BHXH</strong></td>
                <td>8%</td>
                <td>17.5%</td>
                <td>25.5%</td>
              </tr>
              <tr>
                <td><strong>BHYT</strong></td>
                <td>1.5%</td>
                <td>3%</td>
                <td>4.5%</td>
              </tr>
              <tr>
                <td><strong>BHTN</strong></td>
                <td>1%</td>
                <td>1%</td>
                <td>2%</td>
              </tr>
              <tr class="total-row">
                <td><strong>Tổng cộng</strong></td>
                <td><strong>10.5%</strong></td>
                <td><strong>21.5%</strong></td>
                <td><strong>32%</strong></td>
              </tr>
            </tbody>
          </table>
          <small style="margin-top: 0.5rem; display: block; color: var(--text-muted);">
            * Trần BHXH, BHYT: 46.800.000đ | Trần BHTN: 20 × Lương tối thiểu vùng
          </small>
        </div>

        <div class="button-group">
          <button type="button" id="btn-calculate-contribution" class="btn-calculate">Tính toán</button>
          <button type="button" id="btn-reset-contribution" class="btn-reset">Nhập lại</button>
        </div>

        <!-- Contribution Results -->
        <div id="contribution-results" class="result-section">
          <h3>Kết quả tính đóng BHXH</h3>

          <div class="result-grid">
            <div class="result-card employee">
              <h4>👤 Người lao động đóng</h4>
              <div class="result-item">
                <span>BHXH (8%)</span>
                <strong id="employee-bhxh">0 đ</strong>
              </div>
              <div class="result-item">
                <span>BHYT (1.5%)</span>
                <strong id="employee-bhyt">0 đ</strong>
              </div>
              <div class="result-item">
                <span>BHTN (1%)</span>
                <strong id="employee-bhtn">0 đ</strong>
              </div>
              <div class="result-item total">
                <span>Tổng khấu trừ</span>
                <strong id="employee-total">0 đ</strong>
              </div>
            </div>

            <div class="result-card employer">
              <h4>🏢 Doanh nghiệp đóng</h4>
              <div class="result-item">
                <span>BHXH (17.5%)</span>
                <strong id="employer-bhxh">0 đ</strong>
              </div>
              <div class="result-item">
                <span>BHYT (3%)</span>
                <strong id="employer-bhyt">0 đ</strong>
              </div>
              <div class="result-item">
                <span>BHTN (1%)</span>
                <strong id="employer-bhtn">0 đ</strong>
              </div>
              <div class="result-item total">
                <span>Tổng chi phí</span>
                <strong id="employer-total">0 đ</strong>
              </div>
            </div>
          </div>

          <div class="summary-box">
            <div class="summary-item">
              <span>💼 Lương trước khi trừ BH</span>
              <strong id="salary-before">0 đ</strong>
            </div>
            <div class="summary-item">
              <span>💸 Lương thực nhận (sau trừ BH)</span>
              <strong id="salary-after" class="highlight">0 đ</strong>
            </div>
            <div class="summary-item">
              <span>🏭 Tổng chi phí DN phải trả</span>
              <strong id="total-cost">0 đ</strong>
            </div>
          </div>
        </div>
      </form>
    </div>

    <!-- Tab 2: Pension Calculator -->
    <div id="tab-pension" class="tab-panel">
      <h3>Dự tính lương hưu hàng tháng</h3>

      <form id="pension-form" class="insurance-form">
        <div class="form-group">
          <label for="avg-salary">Lương bình quân đóng BHXH (VNĐ/tháng)</label>
          <div class="input-group">
            <input type="text" id="avg-salary" placeholder="Ví dụ: 20.000.000" inputmode="numeric">
            <span class="input-suffix">VNĐ</span>
          </div>
          <small class="hint">Bình quân lương đóng BHXH của toàn bộ thời gian đóng</small>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="years-contributed">Số năm đóng BHXH</label>
            <div class="input-group">
              <input type="number" id="years-contributed" placeholder="Ví dụ: 25" min="15" max="50">
              <span class="input-suffix">năm</span>
            </div>
            <small class="hint">Tối thiểu 20 năm để được hưởng lương hưu</small>
          </div>

          <div class="form-group">
            <label for="gender">Giới tính</label>
            <select id="gender">
              <option value="male">Nam (60 tuổi)</option>
              <option value="female">Nữ (55 tuổi)</option>
            </select>
          </div>
        </div>

        <div class="info-box">
          <h4>📋 Công thức tính lương hưu</h4>
          <div style="background: var(--bg-color); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
            <p style="margin-bottom: 0.5rem;"><strong>Lương hưu = Lương bình quân × Tỷ lệ hưởng</strong></p>
            <ul style="margin: 0; padding-left: 1.5rem; color: var(--text-muted);">
              <li><strong>Tỷ lệ 45%:</strong> Nam 20 năm, Nữ 15 năm</li>
              <li>Mỗi năm tiếp theo: +2% (tối đa 75%)</li>
              <li>Ví dụ: Nữ 25 năm = 45% + (10 × 2%) = 65%</li>
            </ul>
          </div>
        </div>

        <div class="button-group">
          <button type="button" id="btn-calculate-pension" class="btn-calculate">Tính lương hưu</button>
          <button type="button" id="btn-reset-pension" class="btn-reset">Nhập lại</button>
        </div>

        <!-- Pension Results -->
        <div id="pension-results" class="result-section">
          <h3>Kết quả dự tính lương hưu</h3>

          <div class="pension-breakdown">
            <div class="breakdown-item">
              <span>Lương bình quân đóng BHXH</span>
              <strong id="pension-avg-salary">0 đ</strong>
            </div>
            <div class="breakdown-item">
              <span>Số năm đóng BHXH</span>
              <strong id="pension-years">0 năm</strong>
            </div>
            <div class="breakdown-item">
              <span>Tỷ lệ hưởng lương hưu</span>
              <strong id="pension-rate">0%</strong>
            </div>
            <div class="breakdown-item highlight">
              <span>💰 Lương hưu hàng tháng</span>
              <strong id="pension-amount" class="total">0 đ</strong>
            </div>
          </div>

          <div class="info-box" style="margin-top: 1.5rem;">
            <h4>📊 Dự tính thu nhập hưu trí</h4>
            <div class="projection-grid">
              <div class="projection-item">
                <span>Hàng năm</span>
                <strong id="pension-yearly">0 đ</strong>
              </div>
              <div class="projection-item">
                <span>10 năm</span>
                <strong id="pension-10years">0 đ</strong>
              </div>
              <div class="projection-item">
                <span>20 năm</span>
                <strong id="pension-20years">0 đ</strong>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>

    <!-- Tab 3: One-time BHXH Calculator -->
    <div id="tab-onetime" class="tab-panel">
      <h3>Tính BHXH một lần khi thôi việc</h3>

      <form id="onetime-form" class="insurance-form">
        <div class="form-group">
          <label for="onetime-salary">Lương bình quân 6 tháng gần nhất (VNĐ)</label>
          <div class="input-group">
            <input type="text" id="onetime-salary" placeholder="Ví dụ: 18.000.000" inputmode="numeric">
            <span class="input-suffix">VNĐ</span>
          </div>
          <small class="hint">Bình quân lương đóng BHXH của 6 tháng trước khi thôi việc</small>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="years-pre-2014">Số năm trước 2014</label>
            <div class="input-group">
              <input type="number" id="years-pre-2014" placeholder="0" min="0" max="40" step="0.5">
              <span class="input-suffix">năm</span>
            </div>
            <small class="hint">Hệ số 1.5 tháng/năm</small>
          </div>
          <div class="form-group">
            <label for="years-post-2014">Số năm từ 2014</label>
            <div class="input-group">
              <input type="number" id="years-post-2014" placeholder="0" min="0" max="40" step="0.5">
              <span class="input-suffix">năm</span>
            </div>
            <small class="hint">Hệ số 2.0 tháng/năm</small>
          </div>
        </div>

        <div class="info-box">
          <h4>📋 Điều kiện nhận BHXH một lần</h4>
          <ul style="margin: 0.5rem 0 0 1.5rem; color: var(--text-muted);">
            <li>Sau 1 năm nghỉ việc không đóng BHXH</li>
            <li>Ra nước ngoài định cư</li>
            <li>Mắc bệnh hiểm nghèo</li>
          </ul>
          <p style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--text-muted);">
            <strong>Công thức:</strong> (1.5 × Năm trước 2014 + 2.0 × Năm từ 2014) × Lương BQ
          </p>
        </div>

        <div class="button-group">
          <button type="button" id="btn-calculate-onetime" class="btn-calculate">Tính BHXH 1 lần</button>
          <button type="button" id="btn-reset-onetime" class="btn-reset">Nhập lại</button>
        </div>

        <!-- One-time Results -->
        <div id="onetime-results" class="result-section">
          <h3>Kết quả tính BHXH một lần</h3>

          <div class="onetime-breakdown">
            <div class="breakdown-item">
              <span>Lương bình quân 6 tháng</span>
              <strong id="onetime-avg">0 đ</strong>
            </div>
            <div class="breakdown-item">
              <span>Tổng số năm đóng</span>
              <strong id="onetime-total-years">0 năm</strong>
            </div>
            <div class="breakdown-item">
              <span>Hệ số hưởng</span>
              <strong id="onetime-coefficient">0 tháng</strong>
            </div>
            <div class="breakdown-item highlight">
              <span>💰 Số tiền BHXH nhận một lần</span>
              <strong id="onetime-amount" class="total">0 đ</strong>
            </div>
          </div>

          <div class="warning-box">
            <p>
              ⚠️ <strong>Lưu ý:</strong> Khi nhận BHXH một lần, bạn sẽ không được hưởng lương hưu và
              các chế độ BHXH khác. Hãy cân nhắc kỹ trước khi quyết định!
            </p>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- SEO Content Section -->
  <section class="card" style="padding: 2rem; margin-top: 3rem;">
    <h2 style="font-size: 1.5rem; margin-bottom: 1rem;">📚 Hướng dẫn về BHXH & Lương Hưu</h2>

    <h3 style="font-size: 1.2rem; margin-top: 1.5rem; margin-bottom: 0.5rem;">1. BHXH là gì?</h3>
    <p style="margin-bottom: 1rem; color: var(--text-muted);">
      Bảo hiểm xã hội (BHXH) là chế độ do Nhà nước tổ chức nhằm đảm bảo quyền lợi cho người lao động
      khi gặp rủi ro như ốm đau, thai sản, tai nạn lao động, nghỉ hưu, mất việc làm...
    </p>

    <h3 style="font-size: 1.2rem; margin-top: 1.5rem; margin-bottom: 0.5rem;">2. Ai phải tham gia BHXH bắt buộc?</h3>
    <ul style="margin-bottom: 1rem; color: var(--text-muted); padding-left: 1.5rem;">
      <li>Người lao động làm việc theo hợp đồng từ 1 tháng trở lên</li>
      <li>Công chức, viên chức nhà nước</li>
      <li>Sĩ quan, hạ sĩ quan, chiến sĩ quân đội</li>
      <li>Người hoạt động không chuyên trách ở xã, phường, thị trấn</li>
    </ul>

    <h3 style="font-size: 1.2rem; margin-top: 1.5rem; margin-bottom: 0.5rem;">3. Mức đóng BHXH hiện nay</h3>
    <ul style="margin-bottom: 1rem; color: var(--text-muted); padding-left: 1.5rem;">
      <li><strong>BHXH:</strong> Người lao động 8%, Doanh nghiệp 17.5%</li>
      <li><strong>BHYT:</strong> Người lao động 1.5%, Doanh nghiệp 3%</li>
      <li><strong>BHTN:</strong> Người lao động 1%, Doanh nghiệp 1%</li>
      <li><strong>Trần đóng BHXH, BHYT:</strong> 46.800.000đ/tháng</li>
      <li><strong>Trần đóng BHTN:</strong> 20 × Lương tối thiểu vùng</li>
    </ul>

    <h3 style="font-size: 1.2rem; margin-top: 1.5rem; margin-bottom: 0.5rem;">4. Điều kiện hưởng lương hưu</h3>
    <ul style="margin-bottom: 1rem; color: var(--text-muted); padding-left: 1.5rem;">
      <li>Nam đủ 60 tuổi, nữ đủ 55 tuổi (có xu hướng tăng dần)</li>
      <li>Đóng BHXH đủ 20 năm trở lên</li>
      <li>Thôi việc hoặc nghỉ hưu</li>
    </ul>

    <h3 style="font-size: 1.2rem; margin-top: 1.5rem; margin-bottom: 0.5rem;">5. Lợi ích của việc tham gia BHXH</h3>
    <ul style="margin-bottom: 1rem; color: var(--text-muted); padding-left: 1.5rem;">
      <li>✅ Được hưởng lương hưu khi về già</li>
      <li>✅ Hỗ trợ khi ốm đau, thai sản</li>
      <li>✅ Bảo vệ khi tai nạn lao động, bệnh nghề nghiệp</li>
      <li>✅ Trợ cấp khi mất việc làm</li>
      <li>✅ Trợ cấp tuất hất cho người thân khi qua đời</li>
    </ul>
  </section>
</section>

<script src="<%= toolConfig._assets.js %>"></script>