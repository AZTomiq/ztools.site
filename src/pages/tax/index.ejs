<!-- title: T√≠nh Thu·∫ø TNCN 2025 vs 2026 - ZTools -->
<link rel="stylesheet" href="<%= rootPath %>assets/css/tax.css">

<section class="tax-tool-container">
  <header style="text-align: center; margin-bottom: 2rem;">
    <h1>T√≠nh Thu·∫ø Thu Nh·∫≠p C√° Nh√¢n</h1>
    <p class="subtitle">So s√°nh Lu·∫≠t thu·∫ø hi·ªán t·∫°i vs <a
        href="https://xaydungchinhsach.chinhphu.vn/nghi-quyet-110-2025-ubtvqh15-dieu-chinh-muc-giam-tru-gia-canh-cua-thue-thu-nhap-ca-nhan-119251110101313787.htm"
        target="_blank" class="official-link">Ngh·ªã quy·∫øt 110/2025 (√°p d·ª•ng 1/1/2026)</a></p>
  </header>

  <nav class="tab-nav">
    <button class="tab-btn active" data-tab="main" onclick="switchTab('main')">üßÆ T√≠nh thu·∫ø</button>
    <button class="tab-btn" data-tab="compare" onclick="switchTab('compare')">üìä So s√°nh l∆∞∆°ng</button>
  </nav>

  <!-- Tab: Main Calculator -->
  <div class="tab-panel active" id="tab-main">
    <section class="input-section">
      <div class="input-stack">
        <div class="form-group">
          <label id="incomeLabel">Thu nh·∫≠p Gross (VNƒê/th√°ng)</label>
          <div class="input-with-toggle">
            <input type="text" id="incomeInput" placeholder="50,000,000" inputmode="numeric">
            <div class="toggle-group">
              <button type="button" class="toggle-btn active" data-type="gross">Gross</button>
              <button type="button" class="toggle-btn" data-type="net">Net</button>
            </div>
            <div class="scenario-toggle" id="scenarioToggle" style="display: none;">
              <button type="button" class="scenario-btn active" data-scenario="keep-gross" title="DN gi·ªØ nguy√™n Gross, NLƒê h∆∞·ªüng l·ª£i">üìà Gi·ªØ Gross</button>
              <button type="button" class="scenario-btn" data-scenario="keep-net" title="DN gi·ªØ nguy√™n Net, DN ti·∫øt ki·ªám">üíº Gi·ªØ Net</button>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="dependents">S·ªë ng∆∞·ªùi ph·ª• thu·ªôc</label>
            <input type="number" id="dependents" value="0" min="0" max="20">
          </div>
          <div class="form-group form-group-sm">
            <label for="bonusMonths">Bonus (th√°ng)</label>
            <input type="number" id="bonusMonths" value="0" min="0" max="12" placeholder="0">
          </div>
          <div class="form-group form-group-sm">
            <label for="region">V√πng l∆∞∆°ng</label>
            <select id="region">
              <option value="1">V√πng I</option>
              <option value="2">V√πng II</option>
              <option value="3">V√πng III</option>
              <option value="4">V√πng IV</option>
            </select>
          </div>
          <button class="btn" onclick="calculate()">T√≠nh thu·∫ø</button>
        </div>

        <div class="history-section">
          <div class="history-header">
            <div class="history-title">
              <span>üïê L·ªãch s·ª≠</span>
              <span class="history-privacy" id="historyPrivacy">üîí Ch√∫ng t√¥i ƒë·∫£m b·∫£o ch·ªâ l∆∞u tr·ªØ l·ªãch s·ª≠ t√≠nh to√°n
                tr√™n tr√¨nh duy·ªát c·ªßa b·∫°n, kh√¥ng g·ª≠i l√™n server d∆∞·ªõi m·ªçi h√¨nh th·ª©c</span>
            </div>
            <label class="switch">
              <input type="checkbox" id="historyEnabled" checked onchange="setHistoryEnabled(this.checked)">
              <span class="switch-slider"></span>
            </label>
          </div>
          <div class="history-list-wrapper" id="historyWrapper">
            <div class="history-list" id="historyList"></div>
            <button class="history-clear" id="historyClearBtn" onclick="confirmClearHistory()" title="X√≥a t·∫•t c·∫£">üóëÔ∏è
              X√≥a</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Result Sections -->
    <section class="result-section" id="resultSection">
      <div class="result-card">
        <div class="result-header">
          <div class="result-header-row">
            <h2>üìä K·∫øt qu·∫£ chi ti·∫øt</h2>
            <div class="result-actions">
              <button id="shareBtn" class="share-btn" onclick="copyShareUrl()">üîó Share Link</button>
            </div>
          </div>
        </div>
        <table>
          <thead>
            <tr>
              <th>M·ª•c</th>
              <th>2025 (C≈©)</th>
              <th>2026 (M·ªõi)</th>
            </tr>
          </thead>
          <tbody id="resultBody"></tbody>
        </table>
        <div class="result-note" id="resultNote" style="display: none;"></div>
      </div>
    </section>

    <section class="result-section" id="breakdownSection">
      <div class="result-card">
        <div class="result-header">
          <h2>üìã Chi ti·∫øt thu·∫ø l≈©y ti·∫øn</h2>
        </div>
        <div class="breakdown-tables">
          <div class="breakdown-col">
            <h4>Bi·ªÉu thu·∫ø 2025 (7 b·∫≠c)</h4>
            <table>
              <thead>
                <tr>
                  <th>M·ª©c ch·ªãu thu·∫ø</th>
                  <th>VND</th>
                  <th>%</th>
                  <th>N·ªôp</th>
                </tr>
              </thead>
              <tbody id="breakdownOldBody"></tbody>
            </table>
          </div>
          <div class="breakdown-col">
            <h4>Bi·ªÉu thu·∫ø 2026 (5 b·∫≠c)</h4>
            <table>
              <thead>
                <tr>
                  <th>M·ª©c ch·ªãu thu·∫ø</th>
                  <th>VND</th>
                  <th>%</th>
                  <th>N·ªôp</th>
                </tr>
              </thead>
              <tbody id="breakdownNewBody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <section class="result-section" id="employerSection">
      <div class="result-card">
        <div class="result-header">
          <h2>üè¢ Chi ph√≠ Doanh nghi·ªáp</h2>
        </div>
        <table>
          <thead>
            <tr>
              <th>M·ª•c</th>
              <th>S·ªë ti·ªÅn</th>
            </tr>
          </thead>
          <tbody id="employerBody"></tbody>
        </table>
      </div>
    </section>

    <section class="result-section" id="yearlySection">
      <div class="result-card">
        <div class="result-header">
          <h2>üìÖ T·ªïng k·∫øt nƒÉm (c√≥ Bonus)</h2>
        </div>
        <table>
          <thead>
            <tr>
              <th>M·ª•c</th>
              <th>2025</th>
              <th>2026</th>
            </tr>
          </thead>
          <tbody id="yearlyBody"></tbody>
        </table>
      </div>
    </section>

    <section class="result-section" id="refundSection">
      <div class="result-card refund-card">
        <div class="result-header">
          <h2>üßæ Ho√†n thu·∫ø nh·ªù NPT</h2>
          <p class="header-note">Gi·∫£ ƒë·ªãnh: Ch∆∞a ƒëƒÉng k√Ω NPT h√†ng th√°ng, quy·∫øt to√°n cu·ªëi nƒÉm</p>
        </div>
        <table>
          <thead>
            <tr>
              <th>M·ª•c</th>
              <th>2025</th>
              <th>2026</th>
            </tr>
          </thead>
          <tbody id="refundBody">
          </tbody>
        </table>
      </div>
    </section>

  </div><!-- End tab-main -->

  <!-- Tab: Compare Salaries -->
  <div class="tab-panel" id="tab-compare">
    <section class="input-section">
      <div class="input-stack">
        <div class="form-group">
          <label>Nh·∫≠p c√°c m·ª©c l∆∞∆°ng Gross ƒë·ªÉ so s√°nh</label>
          <input type="text" id="compareInput" placeholder="30,000,000 ; 40,000,000 ; 50,000,000" inputmode="text">
          <p class="input-hint">Ph√¢n t√°ch b·∫±ng d·∫•u ; ho·∫∑c , (t·ªëi ƒëa 5 m·ª©c)</p>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="compareDependents">S·ªë ng∆∞·ªùi ph·ª• thu·ªôc</label>
            <input type="number" id="compareDependents" value="0" min="0" max="20">
          </div>
          <div class="form-group form-group-sm">
            <label for="compareRegion">V√πng l∆∞∆°ng</label>
            <select id="compareRegion">
              <option value="1">V√πng I</option>
              <option value="2">V√πng II</option>
              <option value="3">V√πng III</option>
              <option value="4">V√πng IV</option>
            </select>
          </div>
          <button class="btn" onclick="compareMultiple()">So s√°nh</button>
        </div>
      </div>
    </section>

    <section class="result-section" id="compareSection">
      <div class="result-card">
        <div class="result-header">
          <h2>üìä So s√°nh c√°c m·ª©c l∆∞∆°ng (2026)</h2>
        </div>
        <div class="compare-table-wrapper">
          <table id="compareTable">
            <thead id="compareHead"></thead>
            <tbody id="compareBody2"></tbody>
          </table>
        </div>
      </div>
    </section>
  </div><!-- End tab-compare -->

  <!-- Extra Footer Info -->
  <div style="text-align: center; margin-top: 2rem; font-size: 0.9rem; color: var(--text-secondary);">
    <p>BHXH 8% ¬∑ BHYT 1.5% ¬∑ BHTN 1% ¬∑ Tr·∫ßn BHXH/BHYT: 46.8M ¬∑ Tr·∫ßn BHTN: <span id="bhtnCapDisplay">99.2M</span></p>
    <div style="margin-top: 0.5rem;">
      <button class="btn-link" onclick="toggleRegionNote()"
        style="background:none; border:none; color:var(--primary-color); cursor:pointer;">üìã Xem danh s√°ch v√πng
        l∆∞∆°ng</button>
    </div>
  </div>

  <!-- Modal for Region Info -->
  <div class="modal" id="regionModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>M·ª©c l∆∞∆°ng t·ªëi thi·ªÉu v√πng (t·ª´ 01/07/2024)</h3>
        <button class="modal-close" onclick="toggleRegionNote()">√ó</button>
      </div>
      <div class="modal-body">
        <div class="region-info">
          <div class="region-card">
            <h4>V√πng I - 4.960.000ƒë/th√°ng</h4>
            <p>TP.HCM, H√† N·ªôi, H·∫£i Ph√≤ng, ƒê·ªìng Nai, B√¨nh D∆∞∆°ng, B√† R·ªãa-V≈©ng T√†u, Long An...</p>
          </div>
          <!-- Simplified for brevity, logic handles toggle -->
          <div class="region-card">
            <h4>V√πng II - 4.410.000ƒë</h4>
            <p>ƒê√† N·∫µng, C·∫ßn Th∆°, B·∫Øc Ninh...</p>
          </div>
          <div class="region-card">
            <h4>V√πng III - 3.860.000ƒë</h4>
            <p>Hu·∫ø, Kh√°nh H√≤a, L√¢m ƒê·ªìng...</p>
          </div>
          <div class="region-card">
            <h4>V√πng IV - 3.450.000ƒë</h4>
            <p>C√°c t·ªânh c√≤n l·∫°i</p>
          </div>
        </div>
        <p class="note" style="margin-top:1rem; font-size: 0.8rem;">* Tr·∫ßn BHTN = 20 √ó L∆∞∆°ng t·ªëi thi·ªÉu v√πng.</p>
      </div>
    </div>
  </div>
</section>

<script src="<%= rootPath %>assets/js/tax.js"></script>