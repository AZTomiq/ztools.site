<!-- title: iZTools - Small tools. Big help. -->
<% var categories=[ { id: 'job' , titleKey: 'home.cats.job.title' , defaultTitle: 'Job & Income' , icon: 'briefcase' },
  { id: 'finance' , titleKey: 'home.cats.finance.title' , defaultTitle: 'Finance' , icon: 'line-chart' }, { id: 'text' ,
  titleKey: 'home.cats.text.title' , defaultTitle: 'Text Tools' , icon: 'type' }, { id: 'generator' ,
  titleKey: 'home.cats.generator.title' , defaultTitle: 'Generators' , icon: 'wand-2' }, { id: 'daily' ,
  titleKey: 'home.cats.daily.title' , defaultTitle: 'Daily Utilities' , icon: 'calendar' }, { id: 'dev' ,
  titleKey: 'home.cats.dev.title' , defaultTitle: 'DEV Tools' , icon: 'code' } ]; // Fast Access tools (subdomain tools)
  var fastAccessIds=siteGlobal.featured_tools || []; var fastAccessTools=fastAccessIds.map(id=> tools.find(t => t.id ===
  id)).filter(Boolean);
  %>

  <div class="home-page-body">
    <!-- SECTION 1: Hero -->
    <section class="hero-apple">
      <h1 class="headline">
        <%= t('home.hero_title') %>
      </h1>
      <p class="sub-headline">
        <%= t('home.hero_desc') %>
      </p>

      <div class="hero-search-minimal">
        <input type="text" id="home-search" placeholder="<%= t('nav.search_placeholder') %>" autocomplete="off">
        <div class="search-hints"
          style="position: absolute; right: 2rem; top: 50%; transform: translateY(-50%); opacity: 0.4;">
          <kbd>Ctrl K</kbd>
        </div>
      </div>
    </section>

    <!-- SECTION 2: Fast Access (Subdomain Tools) -->
    <section class="section-fast-access" id="fast-access">
      <div class="container">
        <div class="section-header">
          <h2>
            <%= t('home.fast_access.title') %>
          </h2>
          <p class="subtitle">
            <%= t('home.fast_access.subtitle') %>
          </p>
        </div>

        <div class="fast-access-grid">
          <% fastAccessTools.forEach(tool=> {
            const subdomainMap = {
            'web-playground': 'playground',
            'tax': 'tncn',
            'json-toolkit': 'json',
            'compound-interest': 'laikep',
            'lunar-calendar': 'amlich'
            };
            const subdomain = subdomainMap[tool.id] || tool.id;
            %>
            <a href="<%= rootPath %><%= locale === 'vi' ? '' : 'en/' %><%= tool.link.substring(1) %>"
              class="fast-access-card">
              <div class="fast-badge">
                <i data-lucide="sparkles"></i>
              </div>
              <div class="fast-icon">
                <i data-lucide="<%= tool.icon || 'tool' %>" style="width: 40px; height: 40px;"></i>
              </div>
              <h3>
                <%= t(tool.translationKey + '.title' ) || tool.defaultTitle %>
              </h3>
              <p>
                <%= tool.descOverride || t(tool.translationKey + '.desc' ) %>
              </p>
              <div class="fast-url">
                <i data-lucide="link" style="width: 14px; height: 14px;"></i>
                <span>
                  <%= subdomain %>.iZTools.site
                </span>
              </div>
            </a>
            <% }); %>
        </div>
      </div>
    </section>

    <!-- SECTION 3: Smart Picks (Personalized + Trending) -->
    <section class="section-smart-picks" id="smart-picks">
      <div class="container">
        <div class="section-header">
          <h2>
            <%= t('home.smart_picks.title') %>
          </h2>
          <p class="subtitle">
            <%= t('home.smart_picks.subtitle') %>
          </p>
        </div>
        <div class="tools-grid" id="smart-picks-grid">
          <!-- Will be populated by home.js with smart algorithm -->
        </div>
      </div>
    </section>

    <!-- SECTION 4: All Tools by Category -->
    <section class="section-all-tools" id="all-tools">
      <div class="container">
        <div class="category-header" style="text-align: center; margin-bottom: 4rem;">
          <h2 style="font-size: 2rem; font-weight: 800;">ðŸ“‚ <%= t('nav.menu_categories') %>
          </h2>
        </div>

        <% categories.forEach(cat=> {
          const catTools = tools.filter(t => t.category === cat.id && !fastAccessIds.includes(t.id));
          if (catTools.length === 0) return;
          %>
          <div class="category-section" id="<%= cat.id %>-tools" style="margin-bottom: 5rem;">
            <h3 class="category-title"
              style="font-size: 1.5rem; margin-bottom: 2rem; display: flex; align-items: center; gap: 12px;">
              <i data-lucide="<%= cat.icon %>"></i>
              <%= t(cat.titleKey) || cat.defaultTitle %>
            </h3>
            <div class="tools-grid">
              <% catTools.forEach(tool=> { %>
                <a href="<%= rootPath %><%= locale === 'vi' ? '' : 'en/' %><%= tool.link.substring(1) %>"
                  class="tool-card-modern tool-card-wrapper" data-tool-id="<%= tool.id %>"
                  data-personas="<%= (tool.personas || []).join(',') %>" data-vn-only="<%= tool.vn_only || false %>">

                  <div
                    style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1.5rem;">
                    <div class="icon">
                      <i data-lucide="<%= tool.icon || 'tool' %>" style="width: 32px; height: 32px;"></i>
                    </div>
                    <button class="star-btn" data-tool-id="<%= tool.id %>"
                      onclick="event.preventDefault(); event.stopPropagation();" style="position: static;">
                      <i data-lucide="star" style="width: 18px; height: 18px;"></i>
                    </button>
                  </div>

                  <h4 style="font-size: 1.1rem; font-weight: 700; margin-bottom: 0.5rem;">
                    <%= t(tool.translationKey + '.title' ) || tool.defaultTitle %>
                  </h4>
                  <p
                    style="font-size: 0.9rem; color: var(--text-muted); line-height: 1.5; margin-bottom: 2rem; flex-grow: 1;">
                    <%= tool.descOverride || t(tool.translationKey + '.desc' ) %>
                  </p>

                  <div class="card-footer"
                    style="padding-top: 1rem; border-top: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; margin-top: auto;">
                    <div class="card-tags" style="display: flex; gap: 0.5rem;">
                      <% (tool.keywords || []).slice(0, 1).forEach(tag=> { %>
                        <span class="mini-tag"
                          style="font-size: 0.75rem; color: var(--text-muted); background: var(--bg-hover); padding: 2px 6px; border-radius: 4px;">#
                          <%= tag %>
                        </span>
                        <% }); %>
                    </div>
                    <i data-lucide="arrow-right"
                      style="width: 16px; height: 16px; color: var(--primary-color); opacity: 0;"></i>
                  </div>
                </a>
                <% }); %>
            </div>
          </div>
          <% }); %>
      </div>
    </section>

    <!-- SECTION 5: Philosophy (Compact) -->
    <section class="section-philosophy-compact">
      <div class="container">
        <h2>
          <%= t('home.apple.philosophy_title') %>
        </h2>
        <p>
          <%= t('home.apple.philosophy_body') %>
        </p>
      </div>
    </section>

    <%- include('cloud-tags.ejs') %>
  </div>

  <script src="<%= asset('assets/js/home.js') %>"></script>
  <link rel="stylesheet" href="<%= asset('assets/css/home.css') %>">