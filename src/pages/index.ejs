<!-- title: ZTools - Bộ Công Cụ Tiện Ích Online Miễn Phí -->
<% var categories=[ { id: 'job' , titleKey: 'home.cats.job.title' , defaultTitle: 'Job & Income' , icon: 'briefcase' },
  { id: 'finance' , titleKey: 'home.cats.finance.title' , defaultTitle: 'Finance' , icon: 'line-chart' }, { id: 'text' ,
  titleKey: 'home.cats.text.title' , defaultTitle: 'Text Tools' , icon: 'type' }, { id: 'generator' ,
  titleKey: 'home.cats.generator.title' , defaultTitle: 'Generators' , icon: 'wand-2' }, { id: 'daily' ,
  titleKey: 'home.cats.daily.title' , defaultTitle: 'Daily Utilities' , icon: 'calendar' }, { id: 'dev' ,
  titleKey: 'home.cats.dev.title' , defaultTitle: 'DEV Tools' , icon: 'code' } ]; %>


  <section class="hero">
    <h1>
      <%= t('home.hero_title') %>
    </h1>
    <p>
      <%= t('home.hero_desc') %>
    </p>
  </section>

  <!-- Big Hero Search Section -->
  <div class="hero-search-wrap">
    <div class="search-box-hero">
      <span class="search-icon"><i data-lucide="search"></i></span>
      <input type="text" id="home-search" placeholder="<%= t('nav.search_placeholder') %>" aria-label="Search tools">
      <div class="search-hints">
        <kbd>Ctrl</kbd>
        <span>+</span>
        <kbd>K</kbd>
      </div>
    </div>
  </div>

  <!-- Highlight Section -->
  <% const highlightedTools=tools.filter(t=> t.highlight === true); %>
    <% if (highlightedTools.length> 0) { %>
      <div class="container highlight-section">
        <div class="highlight-header">
          <span class="badge-new">FEATURED</span>
          <h2>Phổ biến & Nổi bật <i data-lucide="sparkles"
              style="width: 24px; height: 24px; vertical-align: middle; color: #f59e0b;"></i></h2>
        </div>
        <div class="highlight-grid">
          <% highlightedTools.forEach(tool=> { %>
            <a href="<%= rootPath %><%= locale %><%= tool.link %>" class="highlight-card">
              <div class="highlight-icon">
                <i data-lucide="<%= tool.icon %>"></i>
              </div>
              <div class="highlight-info">
                <h3>
                  <%= t(tool.translationKey + '.title' ) || tool.defaultTitle %>
                </h3>
                <p>
                  <%= tool.descOverride || t(tool.translationKey + '.desc' ) %>
                </p>
                <span class="btn-explore">Khám phá ngay <i data-lucide="arrow-right"
                    style="width: 16px; height: 16px;"></i></span>
              </div>
            </a>
            <% }); %>
        </div>
      </div>
      <% } %>

        <!-- View Options Toolbar -->
        <div class="container view-toolbar"
          style="margin-bottom: 2rem; display: flex; justify-content: flex-end; align-items: center; gap: 1rem; flex-wrap: wrap;">
          <div class="view-toggles"
            style="display: flex; gap: 0.5rem; background: var(--bg-hover); padding: 0.25rem; border-radius: 8px;">
            <button class="btn-icon" data-view="grid" title="Grid View" aria-label="Grid View">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                aria-hidden="true">
                <rect x="3" y="3" width="7" height="7"></rect>
                <rect x="14" y="3" width="7" height="7"></rect>
                <rect x="14" y="14" width="7" height="7"></rect>
                <rect x="3" y="14" width="7" height="7"></rect>
              </svg>
            </button>
            <button class="btn-icon" data-view="list" title="List View" aria-label="List View">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                aria-hidden="true">
                <line x1="8" y1="6" x2="21" y2="6"></line>
                <line x1="8" y1="12" x2="21" y2="12"></line>
                <line x1="8" y1="18" x2="21" y2="18"></line>
                <line x1="3" y1="6" x2="3.01" y2="6"></line>
                <line x1="3" y1="12" x2="3.01" y2="12"></line>
                <line x1="3" y1="18" x2="3.01" y2="18"></line>
              </svg>
            </button>
          </div>

          <div class="sort-options" style="display: flex; gap: 0.5rem;">
            <!-- Category Filter Dropdown -->
            <select id="category-filter" style="width: auto; padding: 0.5rem 1rem; cursor: pointer;"
              aria-label="Filter by category">
              <option value="all">
                <%= t('nav.menu_categories') %>
              </option>
              <% categories.forEach(cat=> { %>
                <option value="<%= cat.id %>">
                  <%= t(cat.titleKey) || cat.defaultTitle %>
                </option>
                <% }); %>
            </select>

            <select id="sort-select" style="width: auto; padding: 0.5rem 2rem 0.5rem 0.75rem; cursor: pointer;"
              aria-label="Sort tools by">
              <option value="default">
                <%= t('home.sort.default') || 'Default' %>
              </option>
              <option value="recent">
                <%= t('home.sort.recent') || 'Recently Used' %>
              </option>
              <option value="popular">
                <%= t('home.sort.popular') || 'Most Used' %>
              </option>
              <option value="az">
                <%= t('home.sort.az') || 'Name (A-Z)' %>
              </option>
              <option value="za">
                <%= t('home.sort.za') || 'Name (Z-A)' %>
              </option>
            </select>
          </div>
        </div>

        <% /* The manual job-income block was removed to avoid duplication. The dynamic loop below handles all
          categories. */ %>
          <% categories.forEach(cat=> {
            const catTools = tools.filter(t => t.category === cat.id);
            if (catTools.length === 0) return;
            %>
            <div class="category-section" id="<%= cat.id %>-tools">
              <h2 class="category-title" style="display: flex; align-items: center; gap: 10px;">
                <i data-lucide="<%= cat.icon %>"></i>
                <%= t(cat.titleKey) || cat.defaultTitle %>
              </h2>
              <div class="tools-grid">
                <% catTools.forEach(tool=> { %>
                  <% let modeClass='' ; if (tool.mode==='standard' ) modeClass='mode-standard-only' ; else if
                    (tool.mode==='advanced' ) modeClass='mode-advanced-only' ; %>
                    <a href="<%= rootPath %><%= locale %><%= tool.link %>"
                      class="card tool-item <%= (tool.status==='legacy' || tool.status==='not-ready') ? 'legacy-item' : '' %> <%= modeClass %>">
                      <div style="font-size: 2rem; margin-bottom: 0.5rem; position: relative;" aria-hidden="true">
                        <i data-lucide="<%= tool.icon %>" style="width: 32px; height: 32px;"></i>
                        <% if (tool.status==='legacy' ) { %>
                          <span class="legacy-badge"
                            style="position: absolute; top: -5px; right: -5px; font-size: 0.5rem; background: var(--text-muted); color: var(--bg-color); padding: 2px 4px; border-radius: 4px; opacity: 0.7;">LEGACY</span>
                          <% } else if (tool.status==='not-ready' ) { %>
                            <span class="legacy-badge"
                              style="position: absolute; top: -5px; right: -5px; font-size: 0.5rem; background: var(--primary-color); color: white; padding: 2px 4px; border-radius: 4px; opacity: 0.8;">BETA</span>
                            <% } %>
                      </div>
                      <h3>
                        <%= t(tool.translationKey + '.title' ) || tool.defaultTitle %>
                      </h3>
                      <p>
                        <%= tool.descOverride || t(tool.translationKey + '.desc' ) %>
                      </p>
                    </a>
                    <% }); %>
              </div>
            </div>
            <% }); %>

              <script src="<%= asset('assets/js/home.js') %>"></script>

              <link rel="stylesheet" href="<%= asset('assets/css/home.css') %>">