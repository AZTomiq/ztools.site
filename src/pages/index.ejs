<!-- title: ZTools - Bộ Công Cụ Tiện Ích Online Miễn Phí -->
<% var categories=[ { id: 'job' , titleKey: 'home.cats.job.title' , defaultTitle: 'Job & Income' , icon: 'briefcase' },
  { id: 'finance' , titleKey: 'home.cats.finance.title' , defaultTitle: 'Finance' , icon: 'line-chart' }, { id: 'text' ,
  titleKey: 'home.cats.text.title' , defaultTitle: 'Text Tools' , icon: 'type' }, { id: 'generator' ,
  titleKey: 'home.cats.generator.title' , defaultTitle: 'Generators' , icon: 'wand-2' }, { id: 'daily' ,
  titleKey: 'home.cats.daily.title' , defaultTitle: 'Daily Utilities' , icon: 'calendar' }, { id: 'dev' ,
  titleKey: 'home.cats.dev.title' , defaultTitle: 'DEV Tools' , icon: 'code' } ]; %>

  <div class="home-page-body">
    <!-- SECTION 1: Hero -->
    <section class="hero-apple">
      <h1 class="headline">
        <%- (t('home.apple.hero_headline') || 'zTools.' ).replace(/\n/g, '<br>' ) %>
      </h1>
      <p class="sub-headline">
        <%= t('home.apple.hero_subheadline') %>
      </p>

      <div class="hero-search-minimal">
        <input type="text" id="home-search" placeholder="<%= t('nav.search_placeholder') %>" autocomplete="off">
        <div class="search-hints"
          style="position: absolute; right: 2rem; top: 50%; transform: translateY(-50%); opacity: 0.4;">
          <kbd>Ctrl K</kbd>
        </div>
      </div>

      <div class="cta-wrap" style="margin-top: 3rem;">
        <a href="#all-tools" class="btn btn-primary" style="padding: 1rem 2rem; border-radius: 30px; font-weight: 700;">
          <%= t('home.apple.hero_explore') %>
        </a>
      </div>
    </section>

    <!-- SECTION 2: Philosophy -->
    <section class="section-philosophy">
      <div class="container">
        <h2 class="title">
          <%= t('home.apple.philosophy_title') %>
        </h2>
        <p class="body-copy">
          <%= t('home.apple.philosophy_body') %>
        </p>
      </div>
    </section>

    <!-- SECTION 3: Product Narrative -->
    <section class="product-narrative">
      <!-- 01: Playground -->
      <div class="narrative-section">
        <div class="narrative-content">
          <div class="narrative-text">
            <span class="tag">01 — <%= t('home.apple.story.playground.title') %></span>
            <h3>
              <%= t('home.apple.story.playground.subtitle') %>
            </h3>
            <p>
              <%= t('home.apple.story.playground.desc') %>
            </p>
            <a href="<%= rootPath %>playground/" class="btn-explore" style="margin-top: 2rem;">
              Try Playground <i data-lucide="arrow-right"></i>
            </a>
          </div>
          <div class="narrative-visual">
            <div class="visual-terminal">
              <div class="terminal-header">
                <div class="dot red"></div>
                <div class="dot yellow"></div>
                <div class="dot green"></div>
              </div>
              <div class="terminal-content">
                <p style="color: #6a9955;">// Welcome to zTool Playground</p>
                <p><span style="color: #569cd6;">const</span> ideas = [];</p>
                <p><span style="color: #569cd6;">function</span> create() {</p>
                <p>&nbsp;&nbsp;ideas.<span style="color: #dcdcaa;">push</span>(<span
                    style="color: #ce9178;">'Innovation'</span>);</p>
                <p>&nbsp;&nbsp;<span style="color: #c586c0;">return</span> ideas;</p>
                <p>}</p>
                <p><span style="color: #dcdcaa;">console</span>.<span style="color: #dcdcaa;">log</span>(<span
                    style="color: #dcdcaa;">create</span>());</p>
                <p class="cursor-blink"
                  style="border-right: 2px solid var(--primary-color); width: 8px; height: 1.2em; display: inline-block; vertical-align: middle;">
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 02: Compound Interest -->
      <div class="narrative-section" style="background: var(--bg-hover);">
        <div class="narrative-content">
          <div class="narrative-visual">
            <div class="visual-slider">
              <div style="display: flex; justify-content: space-between;">
                <span style="font-weight: 700;">Duration</span>
                <span class="value" style="color: var(--primary-color);">30 Years</span>
              </div>
              <div class="slider-bar">
                <div class="slider-handle"></div>
              </div>
              <div class="visual-chart">
                <div class="chart-bar" style="height: 10%;"></div>
                <div class="chart-bar" style="height: 15%;"></div>
                <div class="chart-bar" style="height: 25%;"></div>
                <div class="chart-bar" style="height: 40%;"></div>
                <div class="chart-bar" style="height: 65%;"></div>
                <div class="chart-bar" style="height: 95%;"></div>
              </div>
            </div>
          </div>
          <div class="narrative-text">
            <span class="tag">02 — <%= t('home.apple.story.compound.title') %></span>
            <h3>
              <%= t('home.apple.story.compound.subtitle') %>
            </h3>
            <p>
              <%= t('home.apple.story.compound.desc') %>
            </p>
            <a href="<%= rootPath %>finance/compound-interest/" class="btn-explore" style="margin-top: 2rem;">
              Calculate Interest <i data-lucide="arrow-right"></i>
            </a>
          </div>
        </div>
      </div>

      <!-- 03: JSON -->
      <div class="narrative-section">
        <div class="narrative-content">
          <div class="narrative-text">
            <span class="tag">03 — <%= t('home.apple.story.json.title') %></span>
            <h3>
              <%= t('home.apple.story.json.subtitle') %>
            </h3>
            <p>
              <%= t('home.apple.story.json.desc') %>
            </p>
            <a href="<%= rootPath %>dev/json-toolkit/" class="btn-explore" style="margin-top: 2rem;">
              Format JSON <i data-lucide="arrow-right"></i>
            </a>
          </div>
          <div class="narrative-visual" style="background: #fafafa;">
            <div style="width: 100%; height: 100%; display: flex;">
              <div
                style="flex: 1; padding: 1rem; border-right: 1px solid var(--border-color); font-family: monospace; font-size: 0.7rem; opacity: 0.5;">
                {"id":1,"name":"Test","active":true}
              </div>
              <div style="flex: 1; padding: 1rem; font-family: monospace; font-size: 0.7rem;">
                {<br>
                &nbsp;&nbsp;"id": 1,<br>
                &nbsp;&nbsp;"name": "Test",<br>
                &nbsp;&nbsp;"active": true<br>
                }
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 04: Lunar -->
      <div class="narrative-section" style="background: var(--bg-hover);">
        <div class="narrative-content">
          <div class="narrative-visual">
            <div style="text-align: center;">
              <div style="font-size: 3rem; font-weight: 800; color: var(--primary-color);">01</div>
              <div style="font-size: 1rem; color: var(--text-muted);">Tháng Giêng</div>
              <div
                style="margin-top: 1rem; padding: 0.5rem 1rem; background: var(--primary-subtle); border-radius: 20px; font-size: 0.8rem; font-weight: 700;">
                Tết Nguyên Đán</div>
            </div>
          </div>
          <div class="narrative-text">
            <span class="tag">04 — <%= t('home.apple.story.lunar.title') %></span>
            <h3>
              <%= t('home.apple.story.lunar.subtitle') %>
            </h3>
            <p>
              <%= t('home.apple.story.lunar.desc') %>
            </p>
            <a href="<%= rootPath %>daily/lunar-calendar/" class="btn-explore" style="margin-top: 2rem;">
              View Calendar <i data-lucide="arrow-right"></i>
            </a>
          </div>
        </div>
      </div>

      <!-- 05: Tax -->
      <div class="narrative-section">
        <div class="narrative-content">
          <div class="narrative-text">
            <span class="tag">05 — <%= t('home.apple.story.tax.title') %></span>
            <h3>
              <%= t('home.apple.story.tax.subtitle') %>
            </h3>
            <p>
              <%= t('home.apple.story.tax.desc') %>
            </p>
            <a href="<%= rootPath %>job/tax/" class="btn-explore" style="margin-top: 2rem;">
              Calculate Tax <i data-lucide="arrow-right"></i>
            </a>
          </div>
          <div class="narrative-visual">
            <div style="padding: 2rem; width: 100%;">
              <div
                style="height: 12px; background: var(--bg-hover); border-radius: 6px; width: 60%; margin-bottom: 1rem;">
              </div>
              <div
                style="height: 40px; border: 2px solid var(--primary-color); border-radius: 8px; width: 100%; margin-bottom: 1.5rem;">
              </div>
              <div style="height: 80px; background: var(--primary-subtle); border-radius: 12px; width: 100%;"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION 4: Power Grid (All Tools) -->
    <section class="section-all-tools" id="all-tools">
      <div class="container">
        <div class="category-header" style="text-align: center; margin-bottom: 5rem;">
          <h2 style="font-size: 3rem; font-weight: 800;">
            <%= t('nav.menu_categories') %>
          </h2>
          <p style="color: var(--text-muted); font-size: 1.2rem;">Một thư viện công cụ khổng lồ, luôn sẵn sàng.</p>
        </div>

        <div id="favorites-section" style="display: none; margin-bottom: 5rem;">
          <h3 class="category-title" style="margin-bottom: 2rem;">
            <i data-lucide="star" style="color: #f59e0b; fill: #f59e0b;"></i>
            <%= t('home.favorites') %>
          </h3>
          <div class="tools-grid" id="favorites-grid"></div>
        </div>

        <div id="recent-section" style="display: none; margin-bottom: 5rem;">
          <h3 class="category-title" style="margin-bottom: 2rem;">
            <i data-lucide="history" style="color: var(--primary-color);"></i>
            <%= t('home.recent') %>
          </h3>
          <div class="tools-grid-horizontal" id="recent-grid"></div>
        </div>

        <% categories.forEach(cat=> {
          const catTools = tools.filter(t => t.category === cat.id);
          if (catTools.length === 0) return;
          %>
          <div class="category-section" id="<%= cat.id %>-tools" style="margin-bottom: 6rem;">
            <h3 class="category-title"
              style="font-size: 1.75rem; margin-bottom: 2.5rem; display: flex; align-items: center; gap: 12px;">
              <i data-lucide="<%= cat.icon %>"></i>
              <%= t(cat.titleKey) || cat.defaultTitle %>
            </h3>
            <div class="tools-grid">
              <% catTools.forEach(tool=> { %>
                <a href="<%= rootPath %><%= locale === 'vi' ? '' : 'en/' %><%= tool.link.substring(1) %>"
                  class="tool-card-modern tool-card-wrapper" data-personas="<%= (tool.personas || []).join(',') %>"
                  data-vn-only="<%= tool.vn_only || false %>">

                  <div
                    style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1.5rem;">
                    <div class="icon">
                      <i data-lucide="<%= tool.icon || 'tool' %>" style="width: 32px; height: 32px;"></i>
                    </div>
                    <button class="star-btn" data-tool-id="<%= tool.id %>"
                      onclick="event.preventDefault(); event.stopPropagation();" style="position: static;">
                      <i data-lucide="star" style="width: 18px; height: 18px;"></i>
                    </button>
                  </div>

                  <h4 style="font-size: 1.1rem; font-weight: 700; margin-bottom: 0.5rem;">
                    <%= t(tool.translationKey + '.title' ) || tool.defaultTitle %>
                  </h4>
                  <p style="font-size: 0.9rem; color: var(--text-muted); line-height: 1.5;">
                    <%= tool.descOverride || t(tool.translationKey + '.desc' ) %>
                  </p>
                </a>
                <% }); %>
            </div>
          </div>
          <% }); %>
      </div>
    </section>

    <!-- SECTION 5: Closing -->
    <section class="section-closing">
      <div class="container">
        <h2>
          <%= t('home.apple.closing_headline') %>
        </h2>
        <p>
          <%= t('home.apple.closing_subheadline') %>
        </p>
        <a href="#home-search" class="btn btn-primary"
          style="padding: 1.25rem 3rem; border-radius: 40px; font-weight: 800; font-size: 1.1rem;">
          <%= t('home.apple.closing_cta') %>
        </a>
      </div>
    </section>

    <%- include('cloud-tags.ejs') %>
  </div>

  <script src="<%= asset('assets/js/home.js') %>"></script>
  <link rel="stylesheet" href="<%= asset('assets/css/home.css') %>">

  <style>
    .cursor-blink {
      animation: blink 1s step-end infinite;
    }

    @keyframes blink {

      from,
      to {
        border-color: transparent;
      }

      50% {
        border-color: var(--primary-color);
      }
    }
  </style>